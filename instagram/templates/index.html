{% extends 'base.html' %}
{% load static %}
{% block extra_css%}

    <link rel="shortcut icon" href="assets/favicon.svg" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="{% static 'css/style_instagram.css' %}" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
   
    {% endblock %}
  

    {% block content %}
    

    <main class="main-container ">
      <section class="content-container">
        <div class="content">
          <div class="stories">
            <button class="stories__left-button">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                <path
                  fill="#fff"
                  d="M256 504C119 504 8 393 8 256S119 8 256 8s248 111 248 248-111 248-248 248zM142.1 273l135.5 135.5c9.4 9.4 24.6 9.4 33.9 0l17-17c9.4-9.4 9.4-24.6 0-33.9L226.9 256l101.6-101.6c9.4-9.4 9.4-24.6 0-33.9l-17-17c-9.4-9.4-24.6-9.4-33.9 0L142.1 239c-9.4 9.4-9.4 24.6 0 34z"
                ></path>
              </svg>
            </button>
            <div class="stories__content">

              <button class="story story--has-story">
                <a href="{% url 'newstory' %}">
                <div class="story__avatar">
                  <div class="story__border">
                    <svg
                      width="64"
                      height="64"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <circle r="31" cy="32" cx="32" />
                      <defs>
                        <linearGradient
                          y2="0"
                          x2="1"
                          y1="1"
                          x1="0"
                          id="--story-gradient"
                        >
                          <stop offset="0" stop-color="#f09433" />
                          <stop offset="0.25" stop-color="#e6683c" />
                          <stop offset="0.5" stop-color="#dc2743" />
                          <stop offset="0.75" stop-color="#cc2366" />
                          <stop offset="1" stop-color="#bc1888" />
                        </linearGradient>
                      </defs>
                    </svg>
                  </div>
                  <div class="story__picture">
                    {% if login_user.picture %}
                    <img src="{{ login_user.picture.url }}" alt="User Picture" />
                    {% else %}
                    <img src="" alt="User Picture" />
                    {% endif %}
                  </div>
                </div>
                <span class="story__user">{{ login_user }}</span>
              </a>
              </button>

              <!---->

              
              
              <!-- Modal -->
              <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" id="modal">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h1 class="modal-title fs-5 story_user" id="exampleModalLabel">Modal title</h1>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body " id="story-123" >
                      <!-- card start-->
                      <div id="carouselExample1" class="carousel slide" >
                        <div class="carousel-inner stori">

                          
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample1" data-bs-slide="prev">
                          <span class="carousel-control-prev-icon" aria-hidden="true" style="background-color:gray"></span>
                          <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#carouselExample1" data-bs-slide="next">
                          <span class="carousel-control-next-icon" aria-hidden="true" style="background-color:gray"></span>
                          <span class="visually-hidden">Next</span>
                        </button>
                      </div>
                      <!--card end -->
                     
                    </div>
                    <div class="modal-footer">
                      
                     
                    </div>
                  </div>
                </div>
              </div>
              <!---->
              
              
              




              
              
              
              
              

              
              
              
              
              
              {% for story in stories %}
              <button onclick="story('{{ story.id }}')" class="story" data-bs-toggle="modal" data-bs-target="#exampleModal" name="{{ story.id }}" >
                <div class="story__avatar">
                  <div class="story__border">
                    <svg
                      width="64"
                      height="64"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <circle r="31" cy="32" cx="32" />
                    </svg>
                  </div>
                  <div class="story__picture">
                    <img src="/media/{{ story.following.profile.picture }}" alt="User Picture" />
                  </div>
                </div>
                <span class="story__user">{{ story.following.profile.user.username }}</span>
              </button>
              {% endfor %}
              <!--end story -->
            </div>
            <button class="stories__right-button">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                <path
                  fill="#fff"
                  d="M256 8c137 0 248 111 248 248S393 504 256 504 8 393 8 256 119 8 256 8zm113.9 231L234.4 103.5c-9.4-9.4-24.6-9.4-33.9 0l-17 17c-9.4 9.4-9.4 24.6 0 33.9L285.1 256 183.5 357.6c-9.4 9.4-9.4 24.6 0 33.9l17 17c9.4 9.4 24.6 9.4 33.9 0L369.9 273c9.4-9.4 9.4-24.6 0-34z"
                ></path>
              </svg>
            </button>
            
          </div>
          <!--end full story  -->

















          <div class="posts">
            <!-- start card1-->
            {% for post_item ,like,saved in post_items %}
			      {% if  post_item.picture.count  == 1 %}
            <article class="post">
              <div class="post__header">
                <div class="post__profile">
                  <a
                    href="{% url 'profile' post_item.user.username %}"
                    target="_blank"
                    class="post__avatar"
                  >
                    {% if post_item.user.profile.picture %}
                    <img src="{{ post_item.user.profile.picture.url }}" alt="User Picture" />
                    {% else %}
                    <img src="https://media.geeksforgeeks.org/wp-content/uploads/20220609093229/g-200x200.png" alt="User Picture" />
                    
                    {% endif %}
                  </a>
                  <a
                    href="{% url 'profile' post_item.user.username %}"
                    target="_blank"
                    class="post__user"
                    >{{ post_item.user.username }}</a
                  >
                </div>

                <button class="post__more-options">
                  <svg
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <circle
                      cx="6.5"
                      cy="11.5"
                      r="1.5"
                      fill="var(--text-dark)"
                    />
                    <circle cx="12" cy="11.5" r="1.5" fill="var(--text-dark)" />
                    <circle
                      cx="17.5"
                      cy="11.5"
                      r="1.5"
                      fill="var(--text-dark)"
                    />
                  </svg>
                </button>
              </div>

              <div class="post__content">
                <a href="{% url 'postdetails' post_item.id %}" >
                <div class="post__medias" style="object-fit:fill">
                  {% if post_item.picture.first.file.name|slice:"-3:" != 'mp4' %}
                  <img
                    class="post__media"
                    src="{{ post_item.picture.first.file.url  }}"
                    alt="Post Content" style="width:612px;height:389.35px"
                  />
                  {% else %}
                  <video controls style="height:389.35px;width:612px;object-fit:scale-down" class="post__media">  
                    <source src="{{ post_item.picture.first.file.url }}" type="video/mp4"> 
                    Your browser does not support the html video tag.  
                  </video>  

                  {% endif %}
                </div>
              </a>
              </div>

              <div class="post__footer">
                <div class="post__buttons">
                  <button class="post__button" onclick="addlike('{{ post_item.id }}')" id="{{ post_item.id }}" >
                    {% if like == False %}
										<i class="material-icons has-text-danger">favorite_border</i>
										{% else %}
										<i class="material-icons has-text-danger">favorite</i>
										{% endif %}
                    
                  </button>
                  <button class="post__button">
                    <svg
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M21.2959 20.8165L20.2351 16.8602C20.1743 16.6385 20.2047 16.3994 20.309 16.1907C21.2351 14.3342 21.5438 12.117 20.9742 9.80402C20.2003 6.67374 17.757 4.16081 14.6354 3.33042C13.7833 3.10869 12.9442 3 12.1312 3C6.29665 3 1.74035 8.47365 3.31418 14.5647C4.04458 17.3819 7.05314 20.2992 9.88344 20.9861C10.6486 21.173 11.4008 21.26 12.1312 21.26C13.7006 21.26 15.1701 20.8557 16.4614 20.1601C16.6049 20.0818 16.7657 20.0383 16.9222 20.0383C17.0005 20.0383 17.0787 20.047 17.157 20.0688L21.009 21.0991C21.0307 21.1035 21.0525 21.1078 21.0699 21.1078C21.2177 21.1078 21.3351 20.9687 21.2959 20.8165ZM19.0178 17.1863L19.6178 19.4253L17.4831 18.8558C17.3005 18.8079 17.1135 18.7819 16.9222 18.7819C16.557 18.7819 16.1875 18.8775 15.8571 19.0558C14.6963 19.6818 13.4441 19.9992 12.1312 19.9992C11.4834 19.9992 10.8269 19.9166 10.1791 19.7601C7.78354 19.1775 5.14453 16.6037 4.53586 14.2473C3.90111 11.7865 4.40109 9.26057 5.90536 7.31719C7.40964 5.3738 9.6791 4.26081 12.1312 4.26081C12.8529 4.26081 13.5876 4.35646 14.3137 4.5521C16.9961 5.26511 19.0786 7.39544 19.7525 10.1084C20.2264 12.0213 20.0308 13.9299 19.183 15.6298C18.9395 16.1168 18.8787 16.6689 19.0178 17.1863Z"
                        fill="var(--text-dark)"
                        stroke="var(--text-dark)"
                        stroke-width="0.7"
                      />
                    </svg>
                    
                  </button>
                  <button class="post__button">
                    <svg
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M22.8555 3.44542C22.6978 3.16703 22.3962 3 22.0714 3L2.91369 3.01392C2.52859 3.01392 2.19453 3.25055 2.05997 3.60781C1.96254 3.86764 1.98574 4.14603 2.11565 4.37338C2.16669 4.45689 2.23165 4.53577 2.31052 4.60537L9.69243 10.9712L11.4927 20.5338C11.5623 20.9096 11.8499 21.188 12.2304 21.2483C12.6062 21.3086 12.9774 21.1323 13.1723 20.8029L22.8509 4.35018C23.0179 4.06715 23.0179 3.72381 22.8555 3.44542ZM4.21748 4.39194H19.8164L10.4255 9.75089L4.21748 4.39194ZM12.6248 18.9841L11.1122 10.948L20.5171 5.58436L12.6248 18.9841Z"
                        fill="var(--text-dark)"
                        stroke="var(--text-dark)"
                        stroke-width="0.3"
                      />
                    </svg>
                  </button>

                  <div class="post__indicators"></div>
                  
                  <button class="post__button post__button--align-right" onclick="savepost('{{ post_item.id }}')" id="save-{{ post_item.id }}">
                    {% if saved == True %}
									<i class="material-icons has-text-danger">bookmark</i>
									{% else %}
									<i class="material-icons has-text-danger">bookmark_border</i>
									{% endif %}

                  </button>
                </div>

                <div class="post__infos">
                  <div class="post__likes">
                    <a href="#" class="post__likes-avatar">
                      <img src="assets/default-user.png" alt="User Picture" />
                    </a>

                    <span
                      >Liked by
                      <a class="post__name--underline" href="#">user123</a> and
                      <a id="like-count-{{ post_item.id }}">{{ post_item.likes }}</a></span
                    >
                  </div>

                  <div class="post__description">
                    <span>
                      <a
                        class="post__name--underline"
                        href="https://github.com/leocosta1"
                        target="_blank"
                        >leocosta1</a
                      >
                      {% for tag in post_item.tags.all %}<a>#{{ tag }}</a>{% endfor %}
                    </span>
                  </div>

                  <span class="post__date-time">{{ post_item.posted }}</span>
                </div>
              </div>
            </article>
            
            <!--end card1-->


            {% else %}
            <article class="post">
              <div class="post__header">
                <div class="post__profile">
                  <a href="{% url 'profile' post_item.user.username %}" class="post__avatar">
                    {% if  post_item.user.profile.picture %}
                    <img src="{{ post_item.user.profile.picture.url }}" alt="User Picture" />
                    {% else %}
                    <img src="https://media.geeksforgeeks.org/wp-content/uploads/20220609093229/g-200x200.png" alt="User Picture" />
                    {% endif %}
                  </a>
                  <a href="{% url 'profile' post_item.user.username %}" class="post__user">{{ post_item.user.username }}</a>
                </div>

                <button class="post__more-options">
                  <svg
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <circle
                      cx="6.5"
                      cy="11.5"
                      r="1.5"
                      fill="var(--text-dark)"
                    />
                    <circle cx="12" cy="11.5" r="1.5" fill="var(--text-dark)" />
                    <circle
                      cx="17.5"
                      cy="11.5"
                      r="1.5"
                      fill="var(--text-dark)"
                    />
                  </svg>
                </button>
              </div>

              <div class="post__content">
                <a href="{% url 'postdetails' post_item.id %}">
                <div class="post__medias">
                  {% for image in post_item.picture.all %}
                      {% if image.file.name|slice:"-3:" == 'mp4' %}
                        <video controls    style="height:389.35px;width:612px;object-fit:contain" class="post__media" >
                          <source src="{{ image.file.url }}" type="video/mp4">  
                          Your browser does not support the html video tag.  
                        </video> 
                      {% else %}
                        <img
                        class="post__media"
                        src="{{ image.file.url }}"
                        alt="Post Content"
                        style="width:612px;height:389.35px"
                        />
                      {% endif %}
                  {% endfor %}
                  
                </div>
              </a>
              </div>

              <div class="post__footer">
                <div class="post__buttons">
                  <button class="post__button" onclick="addlike('{{ post_item.id }}')" id="{{ post_item.id }}">
                    {% if like == False %}
										<i class="material-icons has-text-danger">favorite_border</i>
										{% else %}
										<i class="material-icons has-text-danger">favorite</i>
										{% endif %}
                    
                  </button>
                  <button class="post__button">
                    <svg
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M21.2959 20.8165L20.2351 16.8602C20.1743 16.6385 20.2047 16.3994 20.309 16.1907C21.2351 14.3342 21.5438 12.117 20.9742 9.80402C20.2003 6.67374 17.757 4.16081 14.6354 3.33042C13.7833 3.10869 12.9442 3 12.1312 3C6.29665 3 1.74035 8.47365 3.31418 14.5647C4.04458 17.3819 7.05314 20.2992 9.88344 20.9861C10.6486 21.173 11.4008 21.26 12.1312 21.26C13.7006 21.26 15.1701 20.8557 16.4614 20.1601C16.6049 20.0818 16.7657 20.0383 16.9222 20.0383C17.0005 20.0383 17.0787 20.047 17.157 20.0688L21.009 21.0991C21.0307 21.1035 21.0525 21.1078 21.0699 21.1078C21.2177 21.1078 21.3351 20.9687 21.2959 20.8165ZM19.0178 17.1863L19.6178 19.4253L17.4831 18.8558C17.3005 18.8079 17.1135 18.7819 16.9222 18.7819C16.557 18.7819 16.1875 18.8775 15.8571 19.0558C14.6963 19.6818 13.4441 19.9992 12.1312 19.9992C11.4834 19.9992 10.8269 19.9166 10.1791 19.7601C7.78354 19.1775 5.14453 16.6037 4.53586 14.2473C3.90111 11.7865 4.40109 9.26057 5.90536 7.31719C7.40964 5.3738 9.6791 4.26081 12.1312 4.26081C12.8529 4.26081 13.5876 4.35646 14.3137 4.5521C16.9961 5.26511 19.0786 7.39544 19.7525 10.1084C20.2264 12.0213 20.0308 13.9299 19.183 15.6298C18.9395 16.1168 18.8787 16.6689 19.0178 17.1863Z"
                        fill="var(--text-dark)"
                        stroke="var(--text-dark)"
                        stroke-width="0.7"
                      />
                    </svg>
                  </button>
                  <button class="post__button">
                    <svg
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M22.8555 3.44542C22.6978 3.16703 22.3962 3 22.0714 3L2.91369 3.01392C2.52859 3.01392 2.19453 3.25055 2.05997 3.60781C1.96254 3.86764 1.98574 4.14603 2.11565 4.37338C2.16669 4.45689 2.23165 4.53577 2.31052 4.60537L9.69243 10.9712L11.4927 20.5338C11.5623 20.9096 11.8499 21.188 12.2304 21.2483C12.6062 21.3086 12.9774 21.1323 13.1723 20.8029L22.8509 4.35018C23.0179 4.06715 23.0179 3.72381 22.8555 3.44542ZM4.21748 4.39194H19.8164L10.4255 9.75089L4.21748 4.39194ZM12.6248 18.9841L11.1122 10.948L20.5171 5.58436L12.6248 18.9841Z"
                        fill="var(--text-dark)"
                        stroke="var(--text-dark)"
                        stroke-width="0.3"
                      />
                    </svg>
                  </button>

                  <div class="post__indicators"></div>

                  <button class="post__button post__button--align-right" onclick="savepost('{{ post_item.id }}')" id="save-{{ post_item.id }}">
                    {% if saved == True %}
									<i class="material-icons has-text-danger">bookmark</i>
									{% else %}
									<i class="material-icons has-text-danger">bookmark_border</i>
									{% endif %}
                    
                  </button>
                </div>

                <div class="post__infos">
                  <div class="post__likes">
                    <a href="#" class="post__likes-avatar">
                      <img src="assets/default-user.png" alt="User Picture" />
                    </a>

                    <span
                      >Liked by
                      <a class="post__name--underline" href="#">user123</a> and
                      <a id="like-count-{{ post_item.id }}">{{ post_item.likes }}</a></span
                    >
                  </div>

                  <div class="post__description">
                    <span>
                      {% for tag in post_item.tags.all %}
                      {{ tag }} {% if not forloop.last %} {% endif %}
                     {% endfor %}
                    </span>
                    
                  </div>

                  <span class="post__date-time">{{ post_item.posted }}</span>
                </div>
              </div>
            </article>
            {% endif %}
            {% endfor %}

            <!--end card 2 multiple -->
{% comment %}
            <!-- 3 card start -->
            
            <!-- end 3 card -->
            {% endcomment %}


















          </div>
        </div>
<!-- side menu -->
        <section class="side-menu">
          <div class="side-menu__user-profile">
            <a
              href="https://github.com/leocosta1"
              target="_blank"
              class="side-menu__user-avatar"
            >
              <img src="assets/default-user.png" alt="User Picture" />
            </a>
            <div class="side-menu__user-info">
              <a href="https://github.com/leocosta1" target="_blank"
                >leocosta1</a
              >
              <span>Leonardo Costa</span>
            </div>
            <button class="side-menu__user-button">Switch</button>
          </div>

          <div class="side-menu__suggestions-section">
            <div class="side-menu__suggestions-header">
              <h2>Suggestions for You</h2>
              <button>See All</button>
            </div>
            <div class="side-menu__suggestions-content">
              <div class="side-menu__suggestion">
                <a href="#" class="side-menu__suggestion-avatar">
                  <img src="assets/default-user.png" alt="User Picture" />
                </a>
                <div class="side-menu__suggestion-info">
                  <a href="#">usernick16</a>
                  <span>Followed by user1, user2 and 9 others</span>
                </div>
                <button class="side-menu__suggestion-button">Follow</button>
              </div>
              <div class="side-menu__suggestion">
                <a href="#" class="side-menu__suggestion-avatar">
                  <img src="assets/default-user.png" alt="User Picture" />
                </a>
                <div class="side-menu__suggestion-info">
                  <a href="#">usernick17</a>
                  <span>Followed by user1, user2 and 3 others</span>
                </div>
                <button class="side-menu__suggestion-button">Follow</button>
              </div>
              <div class="side-menu__suggestion">
                <a href="#" class="side-menu__suggestion-avatar">
                  <img src="assets/default-user.png" alt="User Picture" />
                </a>
                <div class="side-menu__suggestion-info">
                  <a href="#">usernick18</a>
                  <span>Followed by user1 and 9 others</span>
                </div>
                <button class="side-menu__suggestion-button">Follow</button>
              </div>
              <div class="side-menu__suggestion">
                <a href="#" class="side-menu__suggestion-avatar">
                  <img src="assets/default-user.png" alt="User Picture" />
                </a>
                <div class="side-menu__suggestion-info">
                  <a href="#">usernick19</a>
                  <span >Followed by user1 and 3 others</span>
                </div>
                <button class="side-menu__suggestion-button">Follow</button>
              </div>
              <div class="side-menu__suggestion">
                <a href="#" class="side-menu__suggestion-avatar">
                  <img src="assets/default-user.png" alt="User Picture" />
                </a>
                <div class="side-menu__suggestion-info">
                  <a href="#">usernick20</a>
                  <span>Followed by user1 and 6 others</span>
                </div>
                <button class="side-menu__suggestion-button">Follow</button>
              </div>
            </div>
          </div>
<!-- starting bottom -->



{% comment %}
          <div class="side-menu__footer">
            <div class="side-menu__footer-links">
              <ul class="side-menu__footer-list">
                <li class="side-menu__footer-item">
                  <a class="side-menu__footer-link" href="#">About</a>
                </li>
                <li class="side-menu__footer-item">
                  <a class="side-menu__footer-link" href="#">Help</a>
                </li>
                <li class="side-menu__footer-item">
                  <a class="side-menu__footer-link" href="#">Press</a>
                </li>
                <li class="side-menu__footer-item">
                  <a class="side-menu__footer-link" href="#">API</a>
                </li>
                <li class="side-menu__footer-item">
                  <a class="side-menu__footer-link" href="#">Jobs</a>
                </li>
                <li class="side-menu__footer-item">
                  <a class="side-menu__footer-link" href="#">Privacy</a>
                </li>
                <li class="side-menu__footer-item">
                  <a class="side-menu__footer-link" href="#">Terms</a>
                </li>
                <li class="side-menu__footer-item">
                  <a class="side-menu__footer-link" href="#">Locations</a>
                </li>
                <li class="side-menu__footer-item">
                  <a class="side-menu__footer-link" href="#">Top Accounts</a>
                </li>
                <li class="side-menu__footer-item">
                  <a class="side-menu__footer-link" href="#">Hashtag</a>
                </li>
                <li class="side-menu__footer-item">
                  <a class="side-menu__footer-link" href="#">Language</a>
                </li>
              </ul>
            </div>

            <span class="side-menu__footer-copyright"
              >&copy; Dama.Koushik</span
            >
          </div>
          {% endcomment %}
          <!-- bottom list -->
        </section>
        <!-- end side menu -->
      </section>
    </main>
<!--
    <nav class="navbar">
      <a href="#" class="navbar__button">
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M2.45307 11.751L11.9773 2.02175L21.5015 11.751C21.7906 12.0463 21.9545 12.4468 21.9545 12.8711V20.4556C21.9545 20.7747 21.7037 21 21.4427 21H15.964C15.713 21 15.4721 20.7849 15.4721 20.476V15.8886C15.4721 13.9497 13.9267 12.34 11.9773 12.34C10.0279 12.34 8.48244 13.9497 8.48244 15.8886V20.476C8.48244 20.7849 8.24157 21 7.99053 21H2.51187C2.25085 21 2 20.7747 2 20.4556V12.8711C2 12.4468 2.16397 12.0463 2.45307 11.751Z"
            stroke="var(--text-dark)"
            stroke-width="2"
          />
        </svg>
      </a>
      <a href="#" class="navbar__button">
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M21.669 21.6543C21.8625 21.4622 21.863 21.1494 21.6703 20.9566L17.3049 16.5913C18.7912 14.9327 19.7017 12.7525 19.7017 10.3508C19.7017 5.18819 15.5135 1 10.3508 1C5.18819 1 1 5.18819 1 10.3508C1 15.5135 5.18819 19.7017 10.3508 19.7017C12.7624 19.7017 14.9475 18.7813 16.606 17.2852L20.9739 21.653C21.1657 21.8449 21.4765 21.8454 21.669 21.6543ZM1.9843 10.3508C1.9843 5.7394 5.7394 1.9843 10.3508 1.9843C14.9623 1.9843 18.7174 5.7394 18.7174 10.3508C18.7174 14.9623 14.9623 18.7174 10.3508 18.7174C5.7394 18.7174 1.9843 14.9623 1.9843 10.3508Z"
            fill="var(--text-dark)"
            stroke="var(--text-dark)"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
      </a>
      <a href="#" class="navbar__button">
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M18 2.8H7C5.23269 2.8 3.8 4.23269 3.8 6V17C3.8 18.7673 5.23269 20.2 7 20.2H18C19.7673 20.2 21.2 18.7673 21.2 17V6C21.2 4.23269 19.7673 2.8 18 2.8ZM7 1C4.23858 1 2 3.23858 2 6V17C2 19.7614 4.23858 22 7 22H18C20.7614 22 23 19.7614 23 17V6C23 3.23858 20.7614 1 18 1H7Z"
            fill="var(--text-dark)"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M22 7.99995H3V6.19995H22V7.99995Z"
            fill="var(--text-dark)"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M10 6.99989L6 1.99989L7.57349 1.12573L11.5735 6.12573L10 6.99989Z"
            fill="var(--text-dark)"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M16.5 6.99989L12.5 1.99989L14.0735 1.12573L18.0735 6.12573L16.5 6.99989Z"
            fill="var(--text-dark)"
          />
          <path
            d="M15.75 13.0671C16.0833 13.2595 16.0833 13.7407 15.75 13.9331L10.5 16.9642C10.1667 17.1566 9.75 16.9161 9.75 16.5312L9.75 10.469C9.75 10.0841 10.1667 9.84354 10.5 10.036L15.75 13.0671Z"
            fill="var(--text-dark)"
          />
        </svg>
      </a>
      <a href="#" class="navbar__button">
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M17.6007 7.94185H6.47927C5.84559 7.94185 5.32113 8.43455 5.2816 9.06699L4.80842 16.638C4.6573 19.0559 6.57759 21.0999 9.00024 21.0999H15.0797C17.5023 21.0999 19.4226 19.0559 19.2715 16.638L18.7983 9.06699C18.7588 8.43455 18.2343 7.94185 17.6007 7.94185ZM6.47927 6.14185C4.89508 6.14185 3.58393 7.37361 3.48511 8.95471L3.01192 16.5257C2.79604 19.9799 5.53931 22.9 9.00024 22.9H15.0797C18.5406 22.9 21.2839 19.9799 21.068 16.5257L20.5948 8.95471C20.496 7.37361 19.1849 6.14185 17.6007 6.14185H6.47927Z"
            fill="var(--text-dark)"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M12.2761 2.8C11.0812 2.8 10.1125 3.76867 10.1125 4.96359V6.1419H8.3125V4.96359C8.3125 2.77456 10.0871 1 12.2761 1C14.4651 1 16.2397 2.77456 16.2397 4.96359V6.1419H14.4397V4.96359C14.4397 3.76867 13.471 2.8 12.2761 2.8Z"
            fill="var(--text-dark)"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M12.2757 12.3118C13.4706 12.3118 14.4393 11.3431 14.4393 10.1482L14.4393 9.91256C14.4393 9.41551 14.8422 9.01256 15.3393 9.01256C15.8363 9.01256 16.2393 9.41551 16.2393 9.91256L16.2393 10.1482C16.2393 12.3373 14.4647 14.1118 12.2757 14.1118C10.0866 14.1118 8.31208 12.3373 8.31208 10.1482L8.31208 9.91257C8.31208 9.41551 8.71502 9.01257 9.21208 9.01257C9.70913 9.01257 10.1121 9.41551 10.1121 9.91257L10.1121 10.1482C10.1121 11.3431 11.0807 12.3118 12.2757 12.3118Z"
            fill="var(--text-dark)"
          />
        </svg>
      </a>
      <button class="navbar__button profile-button">
        <div class="profile-button__border"></div>
        <div class="profile-button__picture">
          <img src="assets/default-user.png" alt="User Picture" />
        </div>
      </button>
    </nav> -->
    {% endblock %}
    
    {% block extra_script %}

    <script src="{% static 'js/script.js' %}" defer></script>
    <script src="{% static 'js/init.js' %}" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
    <script>
      
      /* crsf token taken 
function getCookie(name) {
  let cookieValue = null;
  if (document.cookie && document.cookie !== '') {
      const cookies = document.cookie.split(';');
      for (let i = 0; i < cookies.length; i++) {
          const cookie = cookies[i].trim();
          // Does this cookie string begin with the name we want?
          if (cookie.substring(0, name.length + 1) === (name + '=')) {
              cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
              break;
          }
      }
  }
  return cookieValue;
}
const csrftoken = getCookie('csrftoken');
  
*/
       /* ajax creating */
	function addlike(postId) {
		console.log("hello")
		console.log('http://127.0.0.1:8000/post/'+postId+'/like')
		$.ajax({
			url: 'http://127.0.0.1:8000/post/'+postId+'/like',
			type: 'POST',
			//data: {csrfmiddlewaretoken: csrftoken}, // Include CSRF token
			headers: {"Content-Type": "application/json",
      'X-CSRFToken': csrftoken
    },
			success: function(response) {
				
				// Update the like count on the webpage
				$('#like-count-'+postId).text(response.likes);
				//$('.'+postId).text(response.status)
				if(response.status == false ){
					$('#'+postId).html( '<i class="material-icons has-text-danger">favorite</i>' )

				}
				else{
					
					$('#'+postId).html('<i class="material-icons has-text-danger">favorite_border</i>')
				}
				
				
				
				
				
			}
		});
	}
    /* saved ajax */
	 /* ajax creating */
	 function savepost(postId) {
		console.log("hello")
		console.log('http://127.0.0.1:8000/post/'+postId+'/favorite')
		$.ajax({
			url: 'http://127.0.0.1:8000/post/'+postId+'/favorite',
			type: 'POST',
			//data: {csrfmiddlewaretoken: csrftoken}, // Include CSRF token
			headers: {"Content-Type": "application/json",
      'X-CSRFToken': csrftoken
    },
			success: function(response) {
				
				// Update the like count on the webpage
				
				//$('.'+postId).text(response.status)
				if(response.status == false ){
					$('#save-'+postId).html( '<i class="material-icons has-text-danger">bookmark_border</i>' )

				}
				else{
					
					$('#save-'+postId).html('<i class="material-icons has-text-danger">bookmark</i>')
				}
				
				
				
				
				
			}
		});
	}



  function story(postId) {
    var first=1;
    console.log("hello")
    console.log('http://127.0.0.1:8000/stories/showmedia/'+ postId,)
    $.ajax({
      url: 'http://127.0.0.1:8000/stories/showmedia/'+ postId,
      type: 'POST',
      //data: {csrfmiddlewaretoken: csrftoken}, // Include CSRF token
      headers: {"Content-Type": "application/json",
    'X-CSRFToken': csrftoken
  },
  success: function(data){
    
    
    $('.story_user').text("koushik")
    
    $(".stori").attr("id", "jsondata"+postId);
    
    
    $('.stori').empty()
    
    console.log(data)
    $.each(data,function(i,v){
      
      if(first){
      if (v.content.slice(v.content.length - 3) === 'mp4'){
        var div_slides_html = '<div class="carousel-item active"> <video controls style="height:389.35px;width:612px;object-fit:scale-down" class="post__media" id="myvideo">  <source src="/media/'+ v.content + '#t=0.5" type="video/mp4">  </video>   </div>'
          
       
         
          
        
      } else {
        var div_slides_html =  '<div class="carousel-item active"> <img class="post__media"  src="/media/'+ v.content +'" alt="Post Content" style="width:612px;height:389.35px" /> </div>'
      
        
       
        
      
      }
      first=0
    }
    else{
      if (v.content.slice(v.content.length - 3) === 'mp4'){
        var div_slides_html = '<div class="carousel-item"> <video controls style="height:389.35px;width:612px;object-fit:scale-down" class="post__media" id="myvideo">  <source src="/media/'+ v.content + '#t=0.5" type="video/mp4">  </video>   </div>'
          
       
         
          
        
      } else {
        var div_slides_html =  '<div class="carousel-item"> <img class="post__media"  src="/media/'+ v.content +'" alt="Post Content" style="width:612px;height:389.35px" /> </div>'
      
        
       
        
      
      }

    }

      $('#jsondata'+postId).append(div_slides_html);


    });

  }



    });
  }
  




    
    

    /*<div class="carousel-item">
      '<video controls style="height:389.35px;width:612px;object-fit:scale-down" class="post__media">  <source src="/media/'+ v.content + '#t=0.5" type="video/mp4">  </video>  '
    </div>

    <div class="carousel-item">
      <img src="//lh5.googleusercontent.com/-batEXUZE_e4/U8-EmLF9-hI/AAAAAAAABc0/J3tJVUa6Buk/w1358-h905-no/carousel-3.jpg" class="d-block w-100" alt="..." style="width:612px;height:389.35px">
    </div>*/

  

    $(document).ready(function(){
      $('.btn-close').click(function(){
        console.log("stopt")
          // Pause the video
          var video = document.getElementById("myvideo");
          video.pause();
      });
    });


    $('#carouselExample1').on('slide.bs.carousel', function () {
      // Pause the currently playing video when sliding to the next item
      $('video').each(function(){
        this.pause();
      });
    });
    $('#carouselExample1').on('slid.bs.carousel', function (e) {
      var nextSlide = $(e.relatedTarget);
      var videos = nextSlide.find('video');
    
      if (videos.length > 0) {
        videos.each(function() {
          this.play();
        });
      }
    });




































</script>
	 
    {% endblock %}

